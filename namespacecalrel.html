<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>calibrel: calrel Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">calibrel
   &#160;<span id="projectnumber">0.2</span>
   </div>
   <div id="projectbrief">More Accurate Pinhole Camera Calibration with Imperfect Planar Target</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">calrel Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Namespace calrel.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a194e06c8f618da086db876982a70bfcc"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecalrel.html#a194e06c8f618da086db876982a70bfcc">calibrateCamera</a> (InputArrayOfArrays imagePoints, Size imageSize, InputArray objectPoints, int fixedObjPt, InputOutputArray cameraMatrix, InputOutputArray distCoeffs, OutputArrayOfArrays rvecs, OutputArrayOfArrays tvecs, OutputArray newObjPoints, OutputArray stdDeviationsIntrinsics, OutputArray stdDeviationsExtrinsics, OutputArray stdDeviationsObjectPoints, OutputArray perViewErrors, int flags=0, TermCriteria criteria=TermCriteria(TermCriteria::COUNT+TermCriteria::EPS, 60, DBL_EPSILON *30))</td></tr>
<tr class="memdesc:a194e06c8f618da086db876982a70bfcc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds the camera intrinsic and extrinsic parameters from several views of a calibration pattern.  <a href="#a194e06c8f618da086db876982a70bfcc">More...</a><br /></td></tr>
<tr class="separator:a194e06c8f618da086db876982a70bfcc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76f8278e8accc0929d9081da9592b691"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecalrel.html#a76f8278e8accc0929d9081da9592b691">calibrateCamera</a> (InputArrayOfArrays imagePoints, Size imageSize, InputArray objectPoints, int fixedObjPt, InputOutputArray cameraMatrix, InputOutputArray distCoeffs, OutputArrayOfArrays rvecs, OutputArrayOfArrays tvecs, OutputArray newObjPoints, int flags=0, TermCriteria criteria=TermCriteria(TermCriteria::COUNT+TermCriteria::EPS, 60, DBL_EPSILON *30))</td></tr>
<tr class="separator:a76f8278e8accc0929d9081da9592b691"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Namespace calrel. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a194e06c8f618da086db876982a70bfcc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a194e06c8f618da086db876982a70bfcc">&#9670;&nbsp;</a></span>calibrateCamera() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double calrel::calibrateCamera </td>
          <td>(</td>
          <td class="paramtype">InputArrayOfArrays&#160;</td>
          <td class="paramname"><em>imagePoints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Size&#160;</td>
          <td class="paramname"><em>imageSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">InputArray&#160;</td>
          <td class="paramname"><em>objectPoints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fixedObjPt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">InputOutputArray&#160;</td>
          <td class="paramname"><em>cameraMatrix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">InputOutputArray&#160;</td>
          <td class="paramname"><em>distCoeffs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OutputArrayOfArrays&#160;</td>
          <td class="paramname"><em>rvecs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OutputArrayOfArrays&#160;</td>
          <td class="paramname"><em>tvecs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OutputArray&#160;</td>
          <td class="paramname"><em>newObjPoints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OutputArray&#160;</td>
          <td class="paramname"><em>stdDeviationsIntrinsics</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OutputArray&#160;</td>
          <td class="paramname"><em>stdDeviationsExtrinsics</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OutputArray&#160;</td>
          <td class="paramname"><em>stdDeviationsObjectPoints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OutputArray&#160;</td>
          <td class="paramname"><em>perViewErrors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TermCriteria&#160;</td>
          <td class="paramname"><em>criteria</em> = <code>TermCriteria(TermCriteria::COUNT+TermCriteria::EPS,&#160;60,&#160;DBL_EPSILON&#160;*30)</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finds the camera intrinsic and extrinsic parameters from several views of a calibration pattern. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">imagePoints</td><td>It is a vector of vectors of the projections of calibration pattern points (e.g. std::vector&lt;std::vector&lt;cv::Vec2f&gt;&gt;). imagePoints[i].size() must be equal to objectPoints.size() for each i.</td></tr>
    <tr><td class="paramname">imageSize</td><td>Size of the image used only to initialize the intrinsic camera matrix.</td></tr>
    <tr><td class="paramname">objectPoints</td><td>It is a vector of calibration pattern points in the calibration pattern coordinate space (e.g. std::vector&lt;cv::Vec3f&gt;). The same calibration pattern must be shown in each view and it is fully visible. The points are 3D, but since they are in a pattern coordinate system, then, if the rig is planar, it may make sense to put the model to a XY coordinate plane so that Z-coordinate of each input object point is 0. On output, the refined pattern points are returned for imperfect planar target.</td></tr>
    <tr><td class="paramname">fixedObjPt</td><td>The index of the 3D object point to be set as (d, 0, 0) as in Strobl's paper. Usually it is the top-right corner point of the calibration board grid.</td></tr>
    <tr><td class="paramname">cameraMatrix</td><td>Output 3x3 floating-point camera matrix \(\begin{bmatrix} f_x &amp; 0 &amp; c_x\\ 0 &amp; f_y &amp; c_y\\ 0 &amp; 0 &amp; 1 \end{bmatrix}\). If CV_CALIB_USE_INTRINSIC_GUESS and/or CALIB_FIX_ASPECT_RATIO are specified, some or all of fx, fy, cx, cy must be initialized before calling the function.</td></tr>
    <tr><td class="paramname">distCoeffs</td><td>Output vector of distortion coefficients \((k_1, k_2, p_1, p_2[, k_3[, k_4, k_5, k_6 [, s_1, s_2, s_3, s_4[, \tau_x, \tau_y]]]])\) of 4, 5, 8, 12 or 14 elements.</td></tr>
    <tr><td class="paramname">rvecs</td><td>Output vector of rotation vectors (see Rodrigues ) estimated for each pattern view (e.g. std::vector&lt;cv::Mat&gt;&gt;). That is, each k-th rotation vector together with the corresponding k-th translation vector (see the next output parameter description) brings the calibration pattern from the model coordinate space (in which object points are specified) to the world coordinate space, that is, a real position of the calibration pattern in the k-th pattern view (k=0.. <em>M</em> -1).</td></tr>
    <tr><td class="paramname">tvecs</td><td>Output vector of translation vectors estimated for each pattern view.</td></tr>
    <tr><td class="paramname">newObjPoints</td><td>The updated output vector of pattern points.</td></tr>
    <tr><td class="paramname">stdDeviationsIntrinsics</td><td>Output vector of standard deviations estimated for intrinsic parameters. Order of deviations values: \((f_x, f_y, c_x, c_y, k_1, k_2, p_1, p_2, k_3, k_4, k_5, k_6, s_1, s_2, s_3, s_4, \tau_x, \tau_y)\) If one of parameters is not estimated, it's deviation is equals to zero.</td></tr>
    <tr><td class="paramname">stdDeviationsExtrinsics</td><td>Output vector of standard deviations estimated for extrinsic parameters. Order of deviations values: \((R_1, T_1, \dotsc , R_M, T_M)\) where M is number of pattern views, \(R_i, T_i\) are concatenated 1x3 vectors.</td></tr>
    <tr><td class="paramname">stdDeviationsObjectPoints</td><td>Output vector of standard deviations estimated for refined coordinates of calibration pattern points. It has the same size and order as objectPoints vector.</td></tr>
    <tr><td class="paramname">perViewErrors</td><td>Output vector of the RMS re-projection error estimated for each pattern view.</td></tr>
    <tr><td class="paramname">flags</td><td>Different flags that may be zero or a combination of the following values:<ul>
<li><b>CALIB_USE_INTRINSIC_GUESS</b> cameraMatrix contains valid initial values of fx, fy, cx, cy that are optimized further. Otherwise, (cx, cy) is initially set to the image center ( imageSize is used), and focal distances are computed in a least-squares fashion. Note, that if intrinsic parameters are known, there is no need to use this function just to estimate extrinsic parameters. Use solvePnP instead.</li>
<li><b>CALIB_FIX_PRINCIPAL_POINT</b> The principal point is not changed during the global optimization. It stays at the center or at a different location specified when CALIB_USE_INTRINSIC_GUESS is set too.</li>
<li><b>CALIB_FIX_ASPECT_RATIO</b> The functions considers only fy as a free parameter. The ratio fx/fy stays the same as in the input cameraMatrix. When CALIB_USE_INTRINSIC_GUESS is not set, the actual input values of fx and fy are ignored, only their ratio is computed and used further.</li>
<li><b>CALIB_ZERO_TANGENT_DIST</b> Tangential distortion coefficients \((p_1, p_2)\) are set to zeros and stay zero.</li>
<li><b>CALIB_FIX_K1,...,CALIB_FIX_K6</b> The corresponding radial distortion coefficient is not changed during the optimization. If CALIB_USE_INTRINSIC_GUESS is set, the coefficient from the supplied distCoeffs matrix is used. Otherwise, it is set to 0.</li>
<li><b>CALIB_RATIONAL_MODEL</b> Coefficients k4, k5, and k6 are enabled. To provide the backward compatibility, this extra flag should be explicitly specified to make the calibration function use the rational model and return 8 coefficients. If the flag is not set, the function computes and returns only 5 distortion coefficients.</li>
<li><b>CALIB_THIN_PRISM_MODEL</b> Coefficients s1, s2, s3 and s4 are enabled. To provide the backward compatibility, this extra flag should be explicitly specified to make the calibration function use the thin prism model and return 12 coefficients. If the flag is not set, the function computes and returns only 5 distortion coefficients.</li>
<li><b>CALIB_FIX_S1_S2_S3_S4</b> The thin prism distortion coefficients are not changed during the optimization. If CALIB_USE_INTRINSIC_GUESS is set, the coefficient from the supplied distCoeffs matrix is used. Otherwise, it is set to 0.</li>
<li><b>CALIB_TILTED_MODEL</b> Coefficients tauX and tauY are enabled. To provide the backward compatibility, this extra flag should be explicitly specified to make the calibration function use the tilted sensor model and return 14 coefficients. If the flag is not set, the function computes and returns only 5 distortion coefficients.</li>
<li><b>CALIB_FIX_TAUX_TAUY</b> The coefficients of the tilted sensor model are not changed during the optimization. If CALIB_USE_INTRINSIC_GUESS is set, the coefficient from the supplied distCoeffs matrix is used. Otherwise, it is set to 0.</li>
</ul>
</td></tr>
    <tr><td class="paramname">criteria</td><td>Termination criteria for the iterative optimization algorithm.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the overall RMS re-projection error.</dd></dl>
<p>The function estimates the intrinsic camera parameters and extrinsic parameters for each of the views. The algorithm is based on Klaus H. Strobl and Gerd Hirzinger's paper "More Accurate Pinhole Camera
Calibration with Imperfect Planar Target". The coordinates of 3D object points and their corresponding 2D projections in each view must be specified. That may be achieved by using an object with a known geometry and easily detectable feature points. Such an object is called a calibration rig or calibration pattern. Currently, initialization of intrinsic parameters (when CALIB_USE_INTRINSIC_GUESS is not set) is only implemented for planar calibration patterns (where Z-coordinates of the object points must be all zeros).</p>
<p>The algorithm performs the following steps:</p>
<ul>
<li>Compute the initial intrinsic parameters (the option only available for planar calibration patterns) or read them from the input parameters. The distortion coefficients are all set to zeros initially unless some of CALIB_FIX_K? are specified.</li>
<li>Estimate the initial camera pose as if the intrinsic parameters have been already known. This is done using solvePnP.</li>
<li>Run the global Levenberg-Marquardt optimization algorithm to minimize the reprojection error, that is, the total sum of squared distances between the observed feature points imagePoints and the projected (using the current estimates for camera parameters and the poses) object points objectPoints. See projectPoints for details. </li>
</ul>

</div>
</div>
<a id="a76f8278e8accc0929d9081da9592b691"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76f8278e8accc0929d9081da9592b691">&#9670;&nbsp;</a></span>calibrateCamera() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double calrel::calibrateCamera </td>
          <td>(</td>
          <td class="paramtype">InputArrayOfArrays&#160;</td>
          <td class="paramname"><em>imagePoints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Size&#160;</td>
          <td class="paramname"><em>imageSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">InputArray&#160;</td>
          <td class="paramname"><em>objectPoints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fixedObjPt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">InputOutputArray&#160;</td>
          <td class="paramname"><em>cameraMatrix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">InputOutputArray&#160;</td>
          <td class="paramname"><em>distCoeffs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OutputArrayOfArrays&#160;</td>
          <td class="paramname"><em>rvecs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OutputArrayOfArrays&#160;</td>
          <td class="paramname"><em>tvecs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OutputArray&#160;</td>
          <td class="paramname"><em>newObjPoints</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TermCriteria&#160;</td>
          <td class="paramname"><em>criteria</em> = <code>TermCriteria(TermCriteria::COUNT+TermCriteria::EPS,&#160;60,&#160;DBL_EPSILON&#160;*30)</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is an overloaded member function, provided for convenience. It differs from the above function only in what argument(s) it accepts. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
